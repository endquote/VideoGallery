<!DOCTYPE html>
<html>

<head>
  <title>player</title>

  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="styles/player.css" />

  <script src="/socket.io/socket.io.js"></script>
  <script src="scripts/vendor.js"></script>
  <script src="scripts/main.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

</head>

<body>

  <div id="app">

    <video-player inline-template v-bind:video="selectedVideo" v-bind:play-sound="playSound" v-on:progress-changed="onProgressChanged">
      <div id="video-player">
        <video autoplay v-bind:src="'/content/video/' + video._id" v-on:loadstart="onLoadStart" v-on:timeupdate="onTimeUpdate" v-on:durationchange="onTimeUpdate" v-on:ended="onEnded"></video>
      </div>
    </video-player>

    <video-info inline-template v-bind:video="selectedVideo" v-bind:show-info="showInfo">
      <transition name="video-info-toggle">
        <div id="video-info" class="video-info" v-if="showInfo">
          <img id="video-qr-code" v-bind:src="qrcode" />
          <div id="video-info-content-container">
            <div id="video-info-content">
              <div id="video-info-author-title">
                <h2 id="video-info-author">by {{ video.author }}</h2>
                <h1 id="video-info-title">{{ video.title }}</h1>
              </div>
              <div id="video-info-description" v-html="$options.filters.linebreak(video.description)"></div>
            </div>
          </div>
        </div>
      </transition>
    </video-info>

    <video-progress inline-template v-bind:progress="progress">
      <div id="video-progress" v-bind:style="'width:' + (progress * 100) + 'vw'"></div>
    </video-progress>

    <controller-status inline-template v-bind:connected="controllerConnected" v-bind:battery="controllerBattery">
      <div id="controller-status" v-bind:class="{ shown: connected }">
        <div id="controller-battery" v-bind:style="'width:' + battery + '%'"></div>
      </div>
    </controller-status>

    <click-target inline-template v-on:play-mode-changed="onPlayModeChanged">
      <div id="click-target" v-on:pointerup="onPointerUp" v-on:keyup="onKeyPress" tabindex="0"></div>
    </click-target>

  </div>

  <script>
    PlayerPage.init();

  </script>
</body>

</html>
